<div class="chart">
    <canvas id="forecastChart"></canvas>
    <div class="margin">
      <h2>Your IP is: </h2>
      <h3 id="yourIP"></h3>
      <h2>Your aproximate location: </h2>
      <h3 id="yourLocation"></h3>
      <h2>Current temperature: </h2>
      <h3 id="temp"></h3>
      <h2>Rain chance: </h2>
      <h3 id="rain"></h3>
    </div>
</div>

<script>
     const ctx = document.getElementById('forecastChart');
     

new Chart(ctx, {
  type: 'line',
  data: {
    labels: ['Now', '2 hours', '4 hours', '6 hours', '8 hours', '10 hours'],
    datasets: [{
      label: 'Example data',
      data: [12, 15, 23, 5, 2, -10],
      borderWidth: 1
    }]
  },
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});

const getIP = () => {
  const url = "https://ipapi.co/json/";
  fetch(url)
    .then((response) => {
        return response.json()
    })
    .then((data) => {
        // document.getElementById('data').innerHTML = data.image;
        document.getElementById('yourIP').innerHTML = data.ip;
        document.getElementById('yourLocation').innerHTML = data.city + ", " + data.country_name;
        getForecast(data.latitude, data.longitude);
        return data
    })
}

const getForecast = (lat, lon) => {
  const url =`https://api.open-meteo.com/v1/forecast?current_weather=true&latitude=${lat}&longitude=${lon}&hourly=precipitation_probability`;
  fetch(url)
    .then((response) => {
        return response.json()
    })
    .then((data) => {
        // document.getElementById('data').innerHTML = data.image;
        // document.getElementById('temp').innerHTML = url;
        document.getElementById('temp').innerHTML = data.current_weather.temperature + " Â°C";
        document.getElementById('rain').innerHTML = data.hourly.precipitation_probability[1] + " %";
        return data
    })
}

getIP();

</script>

<style>
    .chart {
        width: 100%;
        height: 100%;
    }
    .forecastChart {
        width: 100%;
        height: 100%;
    }
    .margin {
      margin: 20px;
    }
</style>